!function(){"use strict";var e,t;e=function(){function e(e,o){var n,s;if(this.options={target:"eventfeed",orderBy:"none",pastEvents:!1,abbreviate:!1,mock:!1},"object"==typeof e)for(n in e)s=e[n],this.options[n]=s;this.context=null!=o?o:this,this.unique=t()}function t(){var e;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+e()+e()+e()+e()}return e.prototype.run=function(t){var o,n,s;if("string"!=typeof this.options.calendarId)throw new Error("Missing calendarId.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(s=document.createElement("script"),s.id="eventfeed-fetcher",s.src=t||this.buildUrl(),o=document.getElementsByTagName("head"),o[0].appendChild(s),n="eventfeedCache"+this.unique,window[n]=new e(this.options,this),window[n].unique=this.unique),!0},e.prototype.buildUrl=function(){var e,t,o,n,s;if(e="https://www.googleapis.com/calendar/v3/calendars/",t="&fields=description,items(created,description,end,hangoutLink,htmlLink,id,location,start,status,summary,updated)",o="&key=AIzaSyBl3FauupFzkP3F4BYqL47_keO-PSmrTOQ",n=""+e+this.options.calendarId+"/events?",s=(new Date).toISOString(),null!=this.options.maxResults){if("number"!=typeof this.options.maxResults)throw new Error("The maxResults option must be a number.");n+="&maxResults="+this.options.maxResults}if(null!=this.options.singleEvents){if("boolean"!=typeof this.options.singleEvents)throw new Error("The singleEvents option must be a boolean.");n+="&singleEvents="+this.options.singleEvents}if(null!=this.options.showDeleted){if("boolean"!=typeof this.options.showDeleted)throw new Error("The showDeleted option must be a boolean.");n+="&showDeleted="+this.options.showDeleted}if("boolean"!=typeof this.options.pastEvents)throw new Error("The pastEvents option must be a boolean.");switch(this.options.pastEvents===!1&&(n+="&timeMin="+s),this.options.orderBy){case"none":break;case"startTime":if(this.options.singleEvents!==!0)throw new Error("The singleEvents option must be true to order by startTime.");n+="&orderBy=startTime";break;case"updated":n+="&orderBy=updated";break;default:throw new Error("Invalid option for orderBy: '"+this.options.orderBy+"'.")}return n+=t,n+=o,console.log("url: "+n),n+="&callback=eventfeedCache"+this.unique+".parseData"},e.prototype.parseData=function(e){var t,o;if("object"!=typeof e){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data."),!1;throw new Error("Invalid JSON response.")}if(e.error){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,e.error.code+" "+e.error.message),!1;throw new Error("Error from Google: "+e.error.code+" "+e.error.message)}if(0===e.items.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No events were returned from Google."),!1;throw new Error("No events were returned from Google.")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,e),"undefined"!=typeof document&&null!==document&&this.options.mock===!1){console.log("Parsing..."),t=document.getElementsByTagName("head")[0],t.removeChild(document.getElementById("eventfeed-fetcher")),o="eventfeedCache"+this.unique,window[o]=void 0;try{delete window[o]}catch(n){console.log("Cached data could not be deleted.")}null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this,e)}return!0},Date.prototype.timeNow=function(){return(this.getHours()<10?"0":"")+(this.getHours()>12?this.getHours()-12:this.getHours())+":"+(this.getMinutes()<10?"0":"")+this.getMinutes()+(this.getHours()>12?"pm":"am")},e}(),t="undefined"!=typeof exports&&null!==exports?exports:window,t.Eventfeed=e}();