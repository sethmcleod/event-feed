(function(){"use strict";var t,e;t=function(){function t(t,o){var n,s;if(this.options={target:"eventfeed",orderBy:"none",pastEvents:!1,abbreviate:!1},"object"==typeof t)for(n in t)s=t[n],this.options[n]=s;this.context=null!=o?o:this,this.unique=e()}function e(){var t;return t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+t()+t()+t()+t()}return t.prototype.run=function(e){var o,n,s;if("string"!=typeof this.options.calendarId)throw new Error("Missing calendarId.");return console.log("Fetching feed..."),"undefined"!=typeof document&&null!==document&&(s=document.createElement("script"),s.id="eventfeed-fetcher",s.src=e||this.buildUrl(),o=document.getElementsByTagName("head"),o[0].appendChild(s),n="eventfeedCache"+this.unique,window[n]=new t(this.options,this),window[n].unique=this.unique),!0},t.prototype.buildUrl=function(){var t,e,o,n,s;if(t="https://www.googleapis.com/calendar/v3/calendars/",e="&fields=description,items(created,description,end,hangoutLink,htmlLink,id,location,start,status,summary,updated)",o="&key=AIzaSyBl3FauupFzkP3F4BYqL47_keO-PSmrTOQ",n=""+t+this.options.calendarId+"/events?",s=(new Date).toISOString(),null!=this.options.maxResults){if("number"!=typeof this.options.maxResults)throw new Error("The maxResults option must be a number.");n+="&maxResults="+this.options.maxResults}if(null!=this.options.singleEvents){if("boolean"!=typeof this.options.singleEvents)throw new Error("The singleEvents option must be a boolean.");n+="&singleEvents="+this.options.singleEvents}if(null!=this.options.showDeleted){if("boolean"!=typeof this.options.showDeleted)throw new Error("The showDeleted option must be a boolean.");n+="&showDeleted="+this.options.showDeleted}if("boolean"!=typeof this.options.pastEvents)throw new Error("The pastEvents option must be a boolean.");switch(this.options.pastEvents===!1&&(n+="&timeMin="+s),this.options.orderBy){case"none":break;case"startTime":if(this.options.singleEvents!==!0)throw new Error("The singleEvents option must be true to order by startTime.");n+="&orderBy=startTime";break;case"updated":n+="&orderBy=updated";break;default:throw new Error("Invalid option for orderBy: '"+this.options.orderBy+"'.")}return n+=e,n+=o,console.log("url: "+n),n+="&callback=eventfeedCache"+this.unique+".parseData"},t.prototype.parseData=function(t){if("object"!=typeof t){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data."),!1;throw new Error("Invalid JSON response.")}if(t.error){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,t.error.code+" "+t.error.message),!1;throw new Error("Error from Google: "+t.error.code+" "+t.error.message)}if(0===t.items.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No events were returned from Google."),!1;throw new Error("No events were returned from Google.")}null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,t)},Date.prototype.timeNow=function(){return(this.getHours()<10?"0":"")+(this.getHours()>12?this.getHours()-12:this.getHours())+":"+(this.getMinutes()<10?"0":"")+this.getMinutes()+(this.getHours()>12?"pm":"am")},t}(),e="undefined"!=typeof exports&&null!==exports?exports:window,e.Eventfeed=t}).call(this);